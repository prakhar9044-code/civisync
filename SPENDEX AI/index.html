<!DOCTYPE html>
<html lang="en" data-bs-theme="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Spendix AI | Intelligent Finance</title>
    
    <link rel="icon" type="image/png" href="image_1.png"> 

    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="style.css">
</head>
<body class="theme-blue dark-mode">

    <div class="toast-container position-fixed top-0 end-0 p-3" id="toast-container" style="z-index: 9999;"></div>

    <div id="auth-screen" class="d-flex justify-content-center align-items-center vh-100 w-100 position-fixed top-0 start-0 z-3 bg-fade overflow-hidden">
        <canvas id="login-canvas" class="position-absolute top-0 start-0 w-100 h-100" style="z-index: 1;"></canvas>
        
        <div class="glass-card p-4 p-md-5 shadow-lg text-center login-box" style="max-width: 450px; width: 90%; z-index: 10;">
            
            <div class="mb-4">
                <img src="image_2.png" alt="Spendix AI Logo" class="img-fluid pulse-glow rounded-3" style="max-height: 90px; object-fit: contain;">
            </div>
            <p class="text-muted small mb-4 fw-medium">Intelligent Financial Management</p>
            
            <form id="login-form">
                <div class="mb-3 text-start">
                    <label class="small fw-bold text-muted mb-1">Email Address</label>
                    <input type="email" class="form-control glass-input" id="login-email" placeholder="name@company.com" required autocomplete="off">
                </div>
                <div class="mb-4 text-start">
                    <div class="d-flex justify-content-between align-items-center mb-1">
                        <label class="small fw-bold text-muted mb-0">Password</label>
                        <a href="javascript:void(0)" onclick="forgotPassword()" class="small text-primary fw-bold text-decoration-none hover-scale">Forgot Password?</a>
                    </div>
                    <div class="input-group">
                        <input type="password" class="form-control glass-input border-end-0" id="login-password" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" required autocomplete="off">
                        <span class="input-group-text glass-input border-start-0 cursor-pointer text-muted" onclick="togglePassword('login-password', 'login-eye')">
                            <i class="fa-solid fa-eye" id="login-eye"></i>
                        </span>
                    </div>
                </div>
                <button type="submit" class="btn btn-primary w-100 py-2 fw-bold shadow-sm hover-scale mb-3">Secure Sign In</button>
                <p class="small text-muted">New here? <a href="javascript:void(0)" class="text-primary fw-bold" onclick="toggleAuth('signup')">Create an Account</a></p>
            </form>

            <form id="signup-form" class="d-none">
                <div class="mb-3 text-start">
                    <label class="small fw-bold text-muted mb-1">Full Name / Company</label>
                    <input type="text" class="form-control glass-input" id="signup-name" placeholder="e.g. Acme Corp" required autocomplete="off">
                </div>
                <div class="mb-3 text-start">
                    <label class="small fw-bold text-muted mb-1">Email Address</label>
                    <input type="email" class="form-control glass-input" id="signup-email" placeholder="name@company.com" required autocomplete="off">
                </div>
                <div class="mb-4 text-start">
                    <label class="small fw-bold text-muted mb-1">Create Password</label>
                    <div class="input-group">
                        <input type="password" class="form-control glass-input border-end-0" id="signup-password" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" required autocomplete="off">
                        <span class="input-group-text glass-input border-start-0 cursor-pointer text-muted" onclick="togglePassword('signup-password', 'signup-eye')">
                            <i class="fa-solid fa-eye" id="signup-eye"></i>
                        </span>
                    </div>
                </div>
                <button type="submit" class="btn btn-success w-100 py-2 fw-bold shadow-sm hover-scale mb-3">Register Account</button>
                <p class="small text-muted">Already have an account? <a href="javascript:void(0)" class="text-primary fw-bold" onclick="toggleAuth('login')">Sign In</a></p>
            </form>

            <div class="mt-4 pt-3 border-top border-light" id="test-roles-section">
                <small class="text-muted fw-bold d-block mb-2">Quick Test Roles (RBAC Demo)</small>
                <div class="d-flex gap-2 justify-content-center flex-wrap">
                    <span class="badge bg-soft-blue text-primary cursor-pointer hover-scale px-3 py-2" onclick="fillLogin('admin@demo.com')">Admin</span>
                    <span class="badge bg-soft-purple text-purple cursor-pointer hover-scale px-3 py-2" onclick="fillLogin('hr@demo.com')">HR Lead</span>
                    <span class="badge bg-soft-green text-success cursor-pointer hover-scale px-3 py-2" onclick="fillLogin('emp@demo.com')">Employee</span>
                </div>
            </div>
        </div>
    </div>

    <div id="main-app" class="d-none">
        
        <div id="loader" class="loader-overlay d-none">
            <div class="spinner-border text-primary" role="status"></div>
        </div>

        <nav class="sidebar glass-sidebar" id="sidebar">
            <div class="sidebar-header">
                <div class="d-flex align-items-center justify-content-between mb-3">
                    <div class="text-start">
                        <img src="image_2.png" alt="Spendix AI" class="img-fluid rounded" style="max-height: 50px; object-fit: contain;">
                    </div>
                    <div class="mode-toggle-container hover-scale" onclick="ThemeManager.toggleMode()" title="Toggle Theme">
                        <div class="mode-toggle-track">
                            <div class="mode-toggle-thumb">
                                <i class="fa-solid fa-sun mode-icon-sun"></i>
                                <i class="fa-solid fa-moon mode-icon-moon"></i>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="workspace-selector-container hover-scale">
                    <select class="form-select form-select-sm glass-input fw-bold shadow-sm custom-select-style" id="workspace-switcher">
                        <option value="main">üöÄ Main Headquarters</option>
                        <option value="branch">üè¢ Branch Office Alpha</option>
                    </select>
                </div>
            </div>

            <ul class="list-unstyled components" id="nav-links">
                <li class="active-nav" data-roles="Admin,HR,Employee"><a href="javascript:void(0)" onclick="switchView('dashboard')"><i class="fa-solid fa-layer-group"></i> Dashboard</a></li>
                <li data-roles="Admin"><a href="javascript:void(0)" onclick="switchView('financial-health')"><i class="fa-solid fa-heart-pulse"></i> Financial Health</a></li>
                <li data-roles="Admin,HR"><a href="javascript:void(0)" onclick="switchView('approvals')"><i class="fa-solid fa-list-check"></i> Expense Approvals</a></li>
                <li data-roles="Admin,HR,Employee"><a href="javascript:void(0)" onclick="switchView('expenses')"><i class="fa-solid fa-receipt"></i> Log Expenses</a></li>
                <li data-roles="Admin,HR"><a href="javascript:void(0)" onclick="switchView('employees')"><i class="fa-solid fa-users-gear"></i> Payroll & HR</a></li>
                <li data-roles="Admin"><a href="javascript:void(0)" onclick="switchView('treasury')"><i class="fa-solid fa-building-columns"></i> Corporate Treasury</a></li>
                <li data-roles="Admin"><a href="javascript:void(0)" onclick="switchView('predictions')"><i class="fa-solid fa-brain"></i> AI ML Forecasts</a></li>
                <li data-roles="Admin,HR"><a href="javascript:void(0)" onclick="switchView('audit')"><i class="fa-solid fa-clipboard-list"></i> Audit Log</a></li>
                <li data-roles="Admin,HR,Employee"><a href="javascript:void(0)" onclick="switchView('support')"><i class="fa-solid fa-headset"></i> Help & Support</a></li>
                <li data-roles="Admin,HR,Employee"><a href="javascript:void(0)" onclick="switchView('settings')"><i class="fa-solid fa-gear"></i> Settings</a></li>
            </ul>

            <div class="sidebar-footer">
                <div class="user-profile glass-card p-2 mb-3 d-flex align-items-center gap-3 cursor-pointer hover-scale shadow-sm" onclick="switchView('settings')" title="Go to Settings">
                    <div class="position-relative">
                        <img src="" id="profile-avatar" class="rounded-circle shadow-sm" width="42" height="42" alt="Avatar" style="object-fit: cover; border: 2px solid var(--brand-primary);">
                        <span class="position-absolute bottom-0 end-0 bg-success border border-white rounded-circle" style="width: 12px; height: 12px;"></span>
                    </div>
                    <div class="lh-1 text-truncate pe-2 flex-grow-1">
                        <small class="fw-bold d-block text-truncate fs-6 text-main mb-1" id="sidebar-user-name">Loading...</small>
                        <small class="text-primary fw-bold text-uppercase" style="font-size: 10px; letter-spacing: 0.5px;" id="sidebar-role-badge">ROLE</small>
                    </div>
                    <i class="fa-solid fa-chevron-right text-muted opacity-50 me-1"></i>
                </div>
                
                <button class="btn btn-sm btn-outline-danger w-100 fw-bold shadow-sm hover-scale" onclick="logout()"><i class="fa-solid fa-arrow-right-from-bracket me-2"></i>Sign Out</button>
            </div>
        </nav>

        <div id="content">
            <nav class="navbar navbar-expand-lg d-md-none glass-navbar mb-4">
                <button type="button" id="sidebarCollapse" class="btn btn-primary btn-sm">
                    <i class="fa-solid fa-bars"></i>
                </button>
                <span class="ms-auto fw-bold text-gradient">Spendix AI</span>
            </nav>

            <section id="dashboard" class="view-section active-view">
                <div class="d-flex justify-content-between align-items-end mb-4 flex-wrap gap-3">
                    <div>
                        <h2 class="fw-bold">Financial Overview</h2>
                        <p class="text-muted mb-0">Real-time cash flow & AI projections.</p>
                    </div>
                    <div class="d-flex gap-2">
                        <button class="btn btn-glass shadow-sm hover-scale" onclick="exportCSV()"><i class="fa-solid fa-file-csv text-success"></i> CSV</button>
                        <button class="btn btn-primary shadow-lg hover-scale" onclick="exportReport()"><i class="fa-solid fa-file-pdf"></i> Full Report</button>
                    </div>
                </div>

                <div class="row g-4 mb-4" id="stats-row">
                    <div class="col-md-3"><div class="card glass-card h-100 border-0 stat-card"><div class="card-body"><div class="d-flex justify-content-between mb-3"><span class="text-muted text-uppercase fw-semibold" style="font-size: 12px;">Total Spend (Mo)</span><div class="icon-box bg-soft-blue"><i class="fa-solid fa-wallet text-primary"></i></div></div><h3 class="fw-bold stat-value" id="dash-total-expenses">$0</h3></div></div></div>
                    <div class="col-md-3"><div class="card glass-card h-100 border-0 stat-card"><div class="card-body"><div class="d-flex justify-content-between mb-3"><span class="text-muted text-uppercase fw-semibold" style="font-size: 12px;">Payroll Run</span><div class="icon-box bg-soft-purple"><i class="fa-solid fa-people-group text-purple"></i></div></div><h3 class="fw-bold stat-value" id="dash-payroll">$0</h3><small class="text-muted"><span id="dash-emp-count">0</span> Active Employees</small></div></div></div>
                    <div class="col-md-3"><div class="card glass-card h-100 border-0 stat-card"><div class="card-body"><div class="d-flex justify-content-between mb-3"><span class="text-muted text-uppercase fw-semibold" style="font-size: 12px;">Runway</span><div class="icon-box bg-soft-green"><i class="fa-solid fa-plane-departure text-success"></i></div></div><h3 class="fw-bold stat-value" id="dash-runway">--</h3><small class="text-success small">Based on cash reserves</small></div></div></div>
                    <div class="col-md-3"><div class="card glass-card h-100 border-0 position-relative overflow-hidden stat-card"><div class="card-body d-flex align-items-center justify-content-between"><div><span class="text-muted text-uppercase fw-semibold" style="font-size: 12px;">Health Score</span><h2 class="fw-bold mb-0 mt-1 stat-value" id="dash-health">0</h2></div><div style="width: 80px; height: 80px;"><canvas id="healthGaugeChart"></canvas></div></div></div></div>
                </div>

                <div class="row g-4 export-capture">
                    <div class="col-lg-8"><div class="card glass-card border-0 h-100"><div class="card-body"><h5 class="fw-bold mb-4">Cash Flow & Burn Projections</h5><div style="height: 300px;"><canvas id="cashFlowChart"></canvas></div></div></div></div>
                    <div class="col-lg-4"><div class="card glass-card border-0 h-100"><div class="card-body"><h5 class="fw-bold mb-4">Expense Distribution</h5><div style="height: 250px; position: relative;"><canvas id="expensePieChart"></canvas></div></div></div></div>
                </div>
            </section>

            <section id="financial-health" class="view-section d-none">
                <h2 class="fw-bold mb-4">Financial Health & Metrics</h2>
                <div class="row g-4 mb-4">
                    <div class="col-md-4"><div class="card glass-card border-0"><div class="card-body"><h6 class="text-muted text-uppercase fw-semibold mb-3">Debt to Equity Ratio</h6><h3 class="fw-bold text-warning" id="metric-debt-ratio">0.0</h3><div class="progress mt-2" style="height: 6px;"><div class="progress-bar bg-warning" id="bar-debt-ratio" style="width: 0%"></div></div></div></div></div>
                    <div class="col-md-4"><div class="card glass-card border-0"><div class="card-body"><h6 class="text-muted text-uppercase fw-semibold mb-3">Est. Profit Margin</h6><h3 class="fw-bold text-success" id="metric-profit-margin">0%</h3><div class="progress mt-2" style="height: 6px;"><div class="progress-bar bg-success" id="bar-profit-margin" style="width: 0%"></div></div></div></div></div>
                    <div class="col-md-4"><div class="card glass-card border-0"><div class="card-body"><h6 class="text-muted text-uppercase fw-semibold mb-3">Current Cash Reserves</h6><h3 class="fw-bold text-primary" id="metric-cash-reserves">$0</h3><small class="text-muted">Target: $100k</small></div></div></div>
                </div>
                <div class="card glass-card border-0"><div class="card-body"><h5 class="fw-bold mb-4">30-Day Liquidity Trend</h5><div style="height: 300px;"><canvas id="liquidityChart"></canvas></div></div></div>
            </section>

            <section id="approvals" class="view-section d-none">
                <h2 class="fw-bold mb-4">Expense Approvals Kanban</h2>
                <div class="row g-4">
                    <div class="col-md-4"><div class="kanban-column glass-card p-3 h-100"><h6 class="fw-bold text-warning mb-3"><i class="fa-solid fa-clock"></i> Pending Review</h6><div id="kanban-pending" class="kanban-dropzone min-vh-50"></div></div></div>
                    <div class="col-md-4"><div class="kanban-column glass-card p-3 h-100"><h6 class="fw-bold text-primary mb-3"><i class="fa-solid fa-thumbs-up"></i> Approved</h6><div id="kanban-approved" class="kanban-dropzone min-vh-50"></div></div></div>
                    <div class="col-md-4"><div class="kanban-column glass-card p-3 h-100"><h6 class="fw-bold text-success mb-3"><i class="fa-solid fa-money-bill-wave"></i> Reimbursed / Paid</h6><div id="kanban-paid" class="kanban-dropzone min-vh-50"></div></div></div>
                </div>
            </section>

            <section id="expenses" class="view-section d-none">
                <h2 class="fw-bold mb-4">Log Expenses</h2>
                <div class="row g-4">
                    <div class="col-md-4">
                        <div class="card glass-card border-0 sticky-top" style="top: 20px;">
                            <div class="card-body">
                                <div class="d-flex justify-content-between align-items-center mb-3">
                                    <h5 class="fw-bold mb-0">Smart Entry</h5>
                                    <button class="btn btn-sm btn-outline-primary shadow-sm hover-scale" onclick="SimulateOCR()"><i class="fa-solid fa-camera"></i> Scan Receipt</button>
                                </div>
                                <form id="expense-form">
                                    <div class="mb-3"><label class="small text-muted fw-bold">DESCRIPTION</label><input type="text" class="form-control glass-input" id="exp-desc" placeholder="e.g. 'Software license'" required autocomplete="off"><div id="ai-suggestion" class="badge bg-soft-blue text-primary mt-2 fade-in d-none"><i class="fa-solid fa-robot"></i> Suggested: <span id="ai-cat-text">Software</span></div></div>
                                    <div class="mb-3"><label class="small text-muted fw-bold">AMOUNT</label><div class="input-group"><span class="input-group-text glass-input border-end-0" id="currency-symbol">$</span><input type="number" class="form-control glass-input border-start-0" id="exp-amount" placeholder="0.00" required></div></div>
                                    <div class="row g-2 mb-3">
                                        <div class="col-6"><label class="small text-muted fw-bold">DATE</label><input type="date" class="form-control glass-input" id="exp-date" required></div>
                                        <div class="col-6"><label class="small text-muted fw-bold">CATEGORY</label><select class="form-select glass-input" id="exp-category"><option value="Operational">Operational</option><option value="Marketing">Marketing</option><option value="Software">Software</option><option value="Travel">Travel</option><option value="Meals">Meals</option><option value="Rent">Rent</option></select></div>
                                    </div>
                                    <button type="submit" class="btn btn-primary w-100 shadow-sm hover-scale">Log Expense <i class="fa-solid fa-paper-plane ms-2"></i></button>
                                </form>
                                
                                <div class="mt-4 pt-3 border-top">
                                    <div class="d-flex justify-content-between align-items-center">
                                        <small class="fw-bold text-muted">MONTHLY BUDGET</small>
                                        <small class="fw-bold" id="budget-display">$0 / $0</small>
                                    </div>
                                    <div class="progress mt-2 glass-progress" style="height: 8px;"><div class="progress-bar bg-success" id="budget-bar" style="width: 0%"></div></div>
                                    <small class="text-danger d-none mt-1 d-block fw-bold" id="budget-warning"><i class="fa-solid fa-triangle-exclamation"></i> Alert: Approaching or Exceeding Budget!</small>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-8">
                        <div class="card glass-card border-0">
                            <div class="card-header bg-transparent border-0 d-flex justify-content-between align-items-center">
                                <h5 class="mb-0 fw-bold">Transactions</h5>
                                <small class="text-muted"><i class="fa-solid fa-info-circle"></i> Drag rows to re-order</small>
                            </div>
                            <div class="card-body p-0">
                                <div class="table-responsive">
                                    <table class="table table-hover align-middle mb-0 custom-table">
                                        <thead class="bg-light small text-muted">
                                            <tr>
                                                <th width="5%"></th>
                                                <th>Date</th>
                                                <th>Description</th>
                                                <th>Category</th>
                                                <th class="text-end">Amount</th>
                                                <th class="text-center">Status</th>
                                                <th width="5%"></th>
                                            </tr>
                                        </thead>
                                        <tbody id="expense-list-body">
                                            </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <section id="employees" class="view-section d-none">
                <div class="d-flex justify-content-between align-items-center mb-4"><h2 class="fw-bold">Payroll Management</h2><button class="btn btn-primary shadow-lg hover-scale" onclick="openEmpModal()"><i class="fa-solid fa-plus me-2"></i>Add Employee</button></div>
                <div class="card glass-card border-0"><div class="card-body p-0"><div class="table-responsive"><table class="table table-hover align-middle mb-0 custom-table"><thead class="bg-light text-muted small text-uppercase"><tr><th class="ps-4">Employee</th><th>Role</th><th>Base Salary</th><th>Net Pay</th><th class="text-center">Alerts</th><th class="text-end pe-4">Actions</th></tr></thead><tbody id="emp-table-body"></tbody></table></div></div></div>
            </section>

            <section id="treasury" class="view-section d-none">
                <div class="d-flex justify-content-between align-items-center mb-4"><h2 class="fw-bold">Corporate Treasury Portfolio</h2><span class="badge bg-soft-green text-success fs-6"><i class="fa-solid fa-arrow-trend-up"></i> +4.2% This Month</span></div>
                <div class="row g-4 mb-4">
                    <div class="col-md-8"><div class="card glass-card border-0 h-100 p-3"><h5 class="fw-bold mb-3">Equities (NSE/BSE Data)</h5><table class="table custom-table text-start"><thead><tr><th>Asset</th><th>Shares</th><th>Avg Price</th><th>Current Price</th><th>Return</th></tr></thead><tbody><tr><td class="fw-bold">TCS (Tata Consultancy)</td><td>500</td><td>‚Çπ3,850</td><td>‚Çπ4,120</td><td class="text-success">+7.01%</td></tr><tr><td class="fw-bold">HDFC Bank</td><td>1,200</td><td>‚Çπ1,620</td><td>‚Çπ1,580</td><td class="text-danger">-2.46%</td></tr><tr><td class="fw-bold">HINDCOPPER</td><td>3,500</td><td>‚Çπ210</td><td>‚Çπ265</td><td class="text-success">+26.1%</td></tr></tbody></table></div></div>
                    <div class="col-md-4"><div class="card glass-card border-0 h-100 p-3 text-center d-flex flex-column justify-content-center"><h6 class="text-muted">Total Portfolio Value</h6><h2 class="fw-bold text-gradient">‚Çπ4,883,500</h2><small class="text-muted mt-2">Data synced with AlphaVantage API</small></div></div>
                </div>
            </section>

            <section id="predictions" class="view-section d-none">
                <h2 class="fw-bold mb-4">AI Insights & Simulation</h2>
                <div class="row g-4 mb-4"><div class="col-12"><div class="card border-0 bg-gradient-dark text-white shadow-lg overflow-hidden position-relative hover-scale" style="transition: 0.3s"><div class="card-body p-4 position-relative" style="z-index: 2;"><div class="d-flex align-items-start gap-3"><div class="icon-box bg-white text-primary rounded-circle shadow"><i class="fa-solid fa-sparkles"></i></div><div><h5 class="fw-bold text-white">Insight of the Moment</h5><p class="mb-0 fs-5 text-white" id="ai-insight-text">Awaiting data...</p></div></div></div><div class="position-absolute top-0 end-0 bg-white opacity-10 rounded-circle" style="width: 200px; height: 200px; margin-right: -50px; margin-top: -50px;"></div></div></div></div>
                <div class="row g-4">
                    <div class="col-md-6"><div class="card glass-card border-0 h-100"><div class="card-header bg-transparent border-0"><h5 class="fw-bold"><i class="fa-solid fa-sliders me-2"></i>Scenario Simulator</h5></div><div class="card-body"><div class="mb-4"><label class="d-flex justify-content-between fw-bold mb-2"><span>New Hires</span><span class="text-primary" id="sim-hires-val">0</span></label><input type="range" class="form-range custom-range" min="0" max="10" value="0" id="sim-hires"></div><div class="mb-4"><label class="d-flex justify-content-between fw-bold mb-2"><span>Salary Increase</span><span class="text-primary" id="sim-salary-val">0%</span></label><input type="range" class="form-range custom-range" min="0" max="20" value="0" id="sim-salary"></div><div class="mb-4"><label class="d-flex justify-content-between fw-bold mb-2"><span>Marketing Bump</span><span class="text-primary" id="sim-marketing-val">+$0</span></label><input type="range" class="form-range custom-range" min="0" max="10000" step="500" value="0" id="sim-marketing"></div><div class="alert bg-soft-blue border-0 d-flex justify-content-between align-items-center mt-4 glass-card"><div><small class="text-uppercase text-muted fw-bold">Projected Burn</small><h3 class="fw-bold mb-0 text-primary" id="sim-result-burn">$0</h3></div><div class="text-end"><small class="text-uppercase text-muted fw-bold">New Runway</small><h3 class="fw-bold mb-0" id="sim-result-runway">--</h3></div></div></div></div></div>
                    <div class="col-md-6"><div class="card glass-card border-0 h-100"><div class="card-body"><h5 class="fw-bold mb-4">Trajectory Comparison</h5><div style="height: 280px;"><canvas id="simComparisonChart"></canvas></div></div></div></div>
                </div>
            </section>

            <section id="audit" class="view-section d-none">
                <h2 class="fw-bold mb-4">System Activity Audit</h2>
                <div class="card glass-card border-0"><div class="card-body p-0"><div class="list-group list-group-flush rounded-3" id="audit-feed"></div></div></div>
            </section>

            <section id="support" class="view-section d-none">
                <h2 class="fw-bold mb-4">Help & Support</h2>
                <div class="row g-4">
                    <div class="col-md-6">
                        <div class="card glass-card border-0 h-100">
                            <div class="card-body">
                                <h5 class="fw-bold mb-4">Contact Information</h5>
                                <div class="d-flex align-items-center mb-4">
                                    <div class="icon-box bg-soft-primary text-primary me-3 shadow-sm"><i class="fa-solid fa-location-dot"></i></div>
                                    <div><small class="text-muted d-block fw-bold text-uppercase">Corporate Office</small><span class="fw-medium">123 Tech Park, Innovation Block, New Delhi, India</span></div>
                                </div>
                                <div class="d-flex align-items-center mb-4">
                                    <div class="icon-box bg-soft-success text-success me-3 shadow-sm"><i class="fa-solid fa-phone"></i></div>
                                    <div><small class="text-muted d-block fw-bold text-uppercase">Toll-Free Helpline</small><span class="fw-medium">+91 1800-123-4567</span></div>
                                </div>
                                <div class="d-flex align-items-center mb-4">
                                    <div class="icon-box bg-soft-warning text-warning me-3 shadow-sm"><i class="fa-solid fa-envelope"></i></div>
                                    <div><small class="text-muted d-block fw-bold text-uppercase">Email Support</small><span class="fw-medium">support@spendix.ai</span></div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="card glass-card border-0 h-100">
                            <div class="card-body">
                                <h5 class="fw-bold mb-4">Connect With Us</h5>
                                <div class="d-flex gap-3 mb-4">
                                    <a href="javascript:void(0)" class="btn btn-glass border-0 hover-scale text-primary"><i class="fa-brands fa-linkedin fa-2x"></i></a>
                                    <a href="javascript:void(0)" class="btn btn-glass border-0 hover-scale text-info"><i class="fa-brands fa-twitter fa-2x"></i></a>
                                    <a href="javascript:void(0)" class="btn btn-glass border-0 hover-scale text-dark dark-mode-invert"><i class="fa-brands fa-github fa-2x"></i></a>
                                    <a href="javascript:void(0)" class="btn btn-glass border-0 hover-scale text-danger"><i class="fa-brands fa-instagram fa-2x"></i></a>
                                </div>
                                <h5 class="fw-bold mb-3">Send a Direct Message</h5>
                                <form onsubmit="event.preventDefault(); Swal.fire('Message Sent!', 'Our support team will contact you within 24 hours.', 'success'); this.reset();">
                                    <div class="mb-3"><textarea class="form-control glass-input" rows="3" placeholder="How can we help you today?" required></textarea></div>
                                    <button type="submit" class="btn btn-primary w-100 hover-scale"><i class="fa-solid fa-paper-plane me-2"></i>Send Message</button>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <section id="settings" class="view-section d-none">
                <h2 class="fw-bold mb-4">Application Settings</h2>
                <div class="row g-4">
                    <div class="col-md-6">
                        <div class="card glass-card border-0 h-100">
                            <div class="card-body">
                                <h5 class="fw-bold mb-4"><i class="fa-solid fa-user me-2"></i>Profile Settings</h5>
                                <form id="profile-form">
                                    <div class="mb-3"><label class="small text-muted fw-bold">Company / User Name</label><input type="text" class="form-control glass-input" id="set-name" required></div>
                                    <div class="mb-3"><label class="small text-muted fw-bold">Email Address</label><input type="email" class="form-control glass-input" id="set-email" required disabled></div>
                                    <button type="submit" class="btn btn-primary w-100 hover-scale">Save Profile</button>
                                </form>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="card glass-card border-0 h-100">
                            <div class="card-body">
                                <h5 class="fw-bold mb-4"><i class="fa-solid fa-sliders me-2"></i>System Preferences</h5>
                                <form id="preferences-form">
                                    <div class="row g-3 mb-3">
                                        <div class="col-6"><label class="small text-muted fw-bold">Monthly Budget Limit</label><input type="number" class="form-control glass-input" id="set-budget" required></div>
                                        <div class="col-6"><label class="small text-muted fw-bold">Currency</label><select class="form-select glass-input" id="set-currency"><option value="$">USD ($)</option><option value="‚Ç¨">EUR (‚Ç¨)</option><option value="¬£">GBP (¬£)</option><option value="‚Çπ">INR (‚Çπ)</option></select></div>
                                    </div>
                                    <div class="mb-4">
                                        <label class="small text-muted fw-bold mb-2 d-block">Color Theme</label>
                                        <div class="d-flex gap-2">
                                            <button type="button" class="btn rounded-circle theme-btn" style="background-color: #3b82f6; width: 30px; height: 30px;" onclick="ThemeManager.setPrimary('theme-blue')"></button>
                                            <button type="button" class="btn rounded-circle theme-btn" style="background-color: #10b981; width: 30px; height: 30px;" onclick="ThemeManager.setPrimary('theme-green')"></button>
                                            <button type="button" class="btn rounded-circle theme-btn" style="background-color: #8b5cf6; width: 30px; height: 30px;" onclick="ThemeManager.setPrimary('theme-purple')"></button>
                                        </div>
                                    </div>
                                    <div class="form-check form-switch mb-4">
                                        <input class="form-check-input" type="checkbox" id="set-notifications">
                                        <label class="form-check-label fw-medium">Enable Alerts</label>
                                    </div>
                                    <input type="checkbox" id="darkModeToggle" class="d-none"> <button type="submit" class="btn btn-primary w-100 hover-scale">Update Preferences</button>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </div>

        <div class="chat-widget">
            <button class="chat-btn shadow-lg hover-scale" id="chat-toggle">
                <i class="fa-solid fa-robot"></i>
            </button>
            <div class="chat-window shadow-lg glass-card d-none" id="chat-interface">
                <div class="chat-header bg-gradient-primary text-white p-3 d-flex justify-content-between align-items-center">
                    <div class="d-flex align-items-center gap-2"><div class="bg-white text-primary rounded-circle d-flex align-items-center justify-content-center shadow-sm" style="width:32px; height:32px;"><i class="fa-solid fa-bolt small"></i></div><div class="lh-1"><span class="fw-bold small d-block">Spendix AI</span><span class="text-white-50" style="font-size: 10px;">Online</span></div></div>
                    <button class="btn-close btn-close-white small" id="chat-close"></button>
                </div>
                <div class="chat-body p-3" id="chat-messages">
                    <div class="chat-bubble bot fade-in">Hello! I am your AI assistant. Try asking: <br>- "What is my burn rate?"<br>- "Add expense 15 coffee"<br>- "How is my health score?"</div>
                </div>
                <div class="chat-footer p-3 border-top border-light bg-white" style="border-bottom-left-radius: 16px; border-bottom-right-radius: 16px;">
                    <div class="input-group">
                        <input type="text" id="chat-input" class="form-control glass-input form-control-sm" placeholder="Ask Spendix AI..." autocomplete="off">
                        <button class="btn btn-primary btn-sm" id="chat-send"><i class="fa-solid fa-paper-plane"></i></button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="empModal" tabindex="-1">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content glass-card border-0 shadow-lg">
                <div class="modal-header border-bottom-0">
                    <h5 class="modal-title fw-bold text-dark">Employee Details</h5>
                    <button type="button" class="btn-close dark-mode-invert" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form id="emp-form">
                        <div class="row g-3">
                            <div class="col-md-6"><label class="form-label small fw-bold text-muted">Full Name</label><input type="text" class="form-control glass-input" id="emp-name" required></div>
                            <div class="col-md-6"><label class="form-label small fw-bold text-muted">Role</label><input type="text" class="form-control glass-input" id="emp-role" required></div>
                            <div class="col-md-6"><label class="form-label small fw-bold text-muted">Phone Number</label><input type="tel" class="form-control glass-input" id="emp-phone" placeholder="+1..." required></div>
                            <div class="col-md-6"><label class="form-label small fw-bold text-muted">Email</label><input type="email" class="form-control glass-input" id="emp-email" required></div>
                            <div class="col-md-6"><label class="form-label small fw-bold text-muted">Join Date</label><input type="date" class="form-control glass-input" id="emp-join" required></div>
                            <div class="col-md-12"><hr class="text-muted opacity-25"></div>
                            <div class="col-md-6"><label class="form-label small fw-bold text-muted">Base Salary</label><input type="number" class="form-control glass-input" id="emp-base" required></div>
                            <div class="col-md-3"><label class="form-label small fw-bold text-muted">Bonus %</label><input type="number" class="form-control glass-input" id="emp-bonus" value="0"></div>
                            <div class="col-md-3"><label class="form-label small fw-bold text-muted">Tax %</label><input type="number" class="form-control glass-input" id="emp-tax" value="20"></div>
                        </div>
                        <button type="submit" class="btn btn-primary w-100 mt-4 shadow-lg hover-scale">Save Employee</button>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.28/jspdf.plugin.autotable.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/dayjs@1/dayjs.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Sortable/1.15.0/Sortable.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/countup.js/2.0.7/countUp.umd.js"></script>
    
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>

    <script src="script.js"></script>
</body>
</html>